(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,n){"use strict";(function(e){n.d(t,"c",function(){return f}),n.d(t,"e",function(){return d}),n.d(t,"a",function(){return h}),n.d(t,"b",function(){return _}),n.d(t,"d",function(){return b});var r=n(4),a=n(8),i=n(0),o=n.n(i),s=n(76),c=n(25),u=n(22),l=function(e){return null===e?"No":((new Date).getTime()-Date.parse(e))/864e5<=7?"Yes":"No"},f=function(e){return o.a.map(e,function(e){var t=Object.keys(e),n=o.a.map(t,function(t){return e[t]}),r=n[a.b.visited_in_last_week]?l(n[a.b.last_visit]):"No";return{UID:n[a.b.UID]?n[a.b.UID]:-1,family_surname:n[a.b.family_surname]?n[a.b.family_surname]:[],family_member_two:n[a.b.family_member_two]?n[a.b.family_member_two]:[],family_member_three:n[a.b.family_member_three]?n[a.b.family_member_three]:[],last_visit:n[a.b.last_visit],visited_in_last_week:r,number_of_kids:n[a.b.number_of_kids]?n[a.b.number_of_kids]:"--",address_street:n[a.b.address_street]?n[a.b.address_street]:"--",crossing_city:n[a.b.crossing_city]?n[a.b.crossing_city]:"--",border_crossing:n[a.b.border_crossing]?n[a.b.border_crossing]:"--",comments:n[a.b.comments]?n[a.b.comments]:"--",deny:n[a.b.deny]?n[a.b.deny]:"--",isDisabled:"Yes"===r,isActive:"Deny"===n[a.b.deny]}})},m=function(e){return console.log(e),{UID:e.UID?e.UID:"--","Family Surname":e.family_surname?e.family_surname:"--","Number of Kids/\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0434\u0456\u0442\u0435\u0439":e.number_of_kids?e.number_of_kids:"--","Family Member Two":e.family_member_two?e.family_member_two:"--","Family Member Three":e.family_member_three?e.family_member_three:"--","Address - Street/ \u0412\u0443\u043b\u0438\u0446\u044f":e.address_street?e.address_street:"--","Border Crossing Date/ \u0414\u0430\u0442\u0430 \u043f\u0435\u0440\u0435\u0442\u0438\u043d\u0443 \u043a\u043e\u0440\u0434\u043e\u043d\u0443":e.border_crossing?e.border_crossing:"--","City where came from/ \u041c\u0456\u0441\u0442\u043e \u043f\u043e\u0445\u043e\u0434\u0436\u0435\u043d\u043d\u044f":e.crossing_city?e.crossing_city:"--","Last Visit":e.last_visit?e.last_visit:"--","Visited in Last Week":e.visited_in_last_week?e.visited_in_last_week:"--",Comments:e.comments?e.comments:"--",Deny:e.deny?e.deny:"--","Previous Visits":e.previous_visits?e.previous_visits:"--"}},d=function(e,t,n,a,i){if(null===t){var s=m(e);Object(u.c)(s).then(),a(o.a.flatten(o.a.concat(n,e)))}else{var c=Object(r.a)({},t,e);a(o.a.map(n,function(e){if(e.UID===t.UID){var n=Object(r.a)({},e,c),a=Object(r.a)({},n,{visited_in_last_week:l(n.last_visit)}),i=m(a);return Object(u.b)(i).then(),a}return e}))}i({})},h=function(e,t,n,a){n(o.a.map(t,function(t){if(t.UID==e){var n=Object(r.a)({},t,{last_visit:Object(s.a)(new Date,"yyyy-MM-dd"),visited_in_last_week:"Yes",isSelected:!1,isDisabled:!0,previous_visits:o.a.isEmpty(t.last_visit)?t.previous_visits:[t.previous_visits,t.last_visit]});return Object(u.b)(m(n)).then(),n}return t})),a(!0)},_=function(t){var r=c.utils.json_to_sheet(t),a=c.utils.book_new(),i=n(68).join(e,"Data/example_data.xlsx");c.utils.book_append_sheet(a,r,"Example_Data"),c.writeFile(a,i)},b=function(e,t){var n=o.a.map(t,function(t){var n=t.UID+t.family_surname;if(o.a.includes(o.a.toLower(n),o.a.toLower(e)))return t});return o.a.without(n,void 0)}}).call(this,"/")},22:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s}),n.d(t,"c",function(){return c});var r=n(33),a=n(35);function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(I){u=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),s=new D(a||[]);return r(o,"_invoke",{value:E(e,n,s)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=l;var m={};function d(){}function h(){}function _(){}var b={};u(b,o,function(){return this});var v=Object.getPrototypeOf,y=v&&v(v(x([])));y&&y!==t&&n.call(y,o)&&(b=y);var p=_.prototype=d.prototype=Object.create(b);function g(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){var a;r(this,"_invoke",{value:function(r,i){function o(){return new t(function(a,o){!function r(a,i,o,s){var c=f(e[a],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then(function(e){r("next",e,o,s)},function(e){r("throw",e,o,s)}):t.resolve(l).then(function(e){u.value=e,o(u)},function(e){return r("throw",e,o,s)})}s(c.arg)}(r,i,a,o)})}return a=a?a.then(o,o):o()}})}function E(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return S()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=k(o,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=f(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function k(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,m;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=_,r(p,"constructor",{value:_,configurable:!0}),r(_,"constructor",{value:h,configurable:!0}),h.displayName=u(_,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,c,"GeneratorFunction")),e.prototype=Object.create(p),e},e.awrap=function(e){return{__await:e}},g(w.prototype),u(w.prototype,s,function(){return this}),e.AsyncIterator=w,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new w(l(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},g(p),u(p,c,"Generator"),u(p,o,function(){return this}),u(p,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=x,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;j(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),m}},e}var o=function(){var e=Object(r.a)(i().mark(function e(){var t;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.get("https://sheet.best/api/sheets/259f7bec-fcd6-4be1-846d-c3c5dd47c8c3").then(function(e){return e}).catch(function(e){console.log(e)});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(r.a)(i().mark(function e(t){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.patch("https://sheet.best/api/sheets/259f7bec-fcd6-4be1-846d-c3c5dd47c8c3/UID/".concat(t.UID),t).then(function(e){console.log(e)});case 2:e.sent;case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(r.a)(i().mark(function e(t){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.post("https://sheet.best/api/sheets/259f7bec-fcd6-4be1-846d-c3c5dd47c8c3",t).then(function(e){console.log(e)});case 2:e.sent;case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},37:function(e,t){},41:function(e,t,n){e.exports=n.p+"static/media/logo.21319a63.png"},52:function(e,t,n){e.exports=n(75)},59:function(e,t,n){},60:function(e,t,n){},66:function(e,t){},67:function(e,t){},75:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(38),o=n.n(i),s=(n(59),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,81)).then(function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),i(e),o(e)})}),c=n(4),u=n(12),l=n(41),f=n.n(l),m=(n(60),n(0)),d=n.n(m),h=n(20),_=n(8),b=n(34),v=n(48),y=n(47),p=function(e){var t=e.user,n=e.editedUser,r=e.setEditedUser;return a.a.createElement("div",null,d.a.map(_.a,function(e){return a.a.createElement("div",null,a.a.createElement("div",null,e),a.a.createElement(y.a,{value:d.a.get(t,e),onChange:function(t){r(d.a.set(n,e,t))}}))}))},g=function(e){var t=e.searchValue,n=void 0===t?null:t,i=e.isShown,o=e.canEdit,s=e.setShowOverlay,c=e.dataFormatted,l=e.setDataFormatted,f=e.setCheckInDisabled,m=e.setSearchValue,_=Object(r.useState)({}),b=Object(u.a)(_,2),y=b[0],g=b[1],w=n?d.a.find(c,function(e){if((e.UID||e.family_surname)&&(e.UID==n||e.family_surname==n))return e}):null;return a.a.createElement(v.a,{isShown:i,isModal:!0,onEscape:function(){return e.setShowOverlay(!1)},onBackgroundClick:function(){return s(!1)}},a.a.createElement("div",{className:"main-content"},a.a.createElement(a.a.Fragment,null,a.a.createElement("form",{className:"Add-Point-Form",method:"get"},a.a.createElement("label",null,"".concat(n))),a.a.createElement(p,{user:w,canEdit:o,editedUser:y,setEditedUser:g}),a.a.createElement("div",{className:"Controls"},a.a.createElement("button",{onClick:function(){s(!1),o?Object(h.e)(y,w,c,l,g):Object(h.a)(w,c,l,f),m(null)}},o?"Submit":"Check In"),a.a.createElement("button",{onClick:function(){s(!1),m(null)}},"Cancel")))))},w=n(80),E=n(22),k=a.a.memo(function(){console.log("here");var e=Object(r.useState)({rows:[],cols:[]}),t=Object(u.a)(e,2),n=t[0],i=(t[1],Object(r.useState)([])),o=Object(u.a)(i,2),s=o[0],l=o[1],m=Object(r.useState)("-1"),v=Object(u.a)(m,2),y=v[0],p=v[1],k=Object(r.useState)(!0),O=Object(u.a)(k,2),j=O[0],D=O[1],x=Object(r.useState)(!0),S=Object(u.a)(x,2),I=S[0],L=S[1],U=Object(r.useState)(!1),C=Object(u.a)(U,2),N=C[0],F=C[1],T=Object(r.useState)(""),A=Object(u.a)(T,2),P=A[0],V=A[1],G=Object(r.useState)(!1),M=Object(u.a)(G,2),B=M[0],Y=M[1],J=Object(r.useState)([]),K=Object(u.a)(J,2),H=K[0],W=K[1],q=0;Object(r.useEffect)(function(){console.log("useEffect"),0===q&&(Object(E.a)().then(function(e){var t=d.a.flatten(e.data),n=Object(h.c)(t);l(n)}),q=1)},[n]);var R={searchValue:P,isShown:N,canEdit:B,setShowOverlay:function(e){F(e)},dataFormatted:s,setDataFormatted:function(e){l(e)},setCheckInDisabled:function(e){D(e)},setSearchValue:function(e){V(e)}};return a.a.createElement("div",{className:"App"},N&&a.a.createElement("div",{id:"opaque"}),a.a.createElement("header",{className:"App-header"},a.a.createElement("img",{src:f.a,className:"App-logo",alt:"logo"}),a.a.createElement("div",null,"JCC Krakow Check In")),a.a.createElement("div",{className:"Grid-Header"},a.a.createElement("div",{className:"Buttons"},a.a.createElement("button",{onClick:function(){Object(h.b)(s)}},"Export"),a.a.createElement("button",{disabled:j,onClick:function(){return Object(h.a)(y,s,l,D)}},"Check In"),a.a.createElement("button",{onClick:function(){F(!0),Y(!0)}},"Add Family"),a.a.createElement("button",{disabled:I,onClick:function(){F(!0),Y(!0)}},"Edit Family"))),a.a.createElement("div",{className:"App-Body"},a.a.createElement("p",null,a.a.createElement("div",{className:"search-bar"},"Search by surname or UID:",a.a.createElement(w.a,{onChange:function(e){return V(e)}}),a.a.createElement("div",{className:"submit"},a.a.createElement("button",{onClick:function(){return W(Object(h.d)(P,s))}}," Submit "))),a.a.createElement(g,R),a.a.createElement("div",{className:"data-table"},s?a.a.createElement(b.a,{data:d.a.isEmpty(H)?s:H,isSelectable:!0,onSelect:function(e){p(e.UID),function(e){L(y===e.UID),D(y===e.UID||"Yes"===e.visited_in_last_week);var t=d.a.map(s,function(t){return e.UID===t.UID?Object(c.a)({},t,{isSelected:!e.isSelected}):Object(c.a)({},t,{isSelected:!1})});V(e.UID),l(t)}(e)},emptyCellText:"--",hasLightHeader:!1},d.a.map(_.a,function(e){return a.a.createElement(b.a.Column,{field:"".concat(e)}," ",e," ")})):""))),a.a.createElement("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer"}))});o.a.createRoot(document.getElementById("root")).render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(k,null))),s()},8:function(e,t,n){"use strict";var r,a,i;n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),function(e){e.UID="UID",e.family_surname="family_surname",e.number_of_kids="number_of_kids",e.family_member_two="family_member_two",e.family_member_three="family_member_three",e.address_street="address_street",e.crossing_city="crossing_city",e.border_crossing="border_crossing",e.last_visit="last_visit",e.visited_in_last_week="visited_in_last_week",e.comments="comments",e.deny="deny"}(r||(r={})),function(e){e.UID="UID",e.family_surname="Family Surname",e.number_of_kids="Number of Kids/\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0434\u0456\u0442\u0435\u0439",e.family_member_two="Family Member Two",e.family_member_three="Family Member Three",e.address_street="Address - Street/ \u0412\u0443\u043b\u0438\u0446\u044f",e.border_crossing="Border Crossing Date/ \u0414\u0430\u0442\u0430 \u043f\u0435\u0440\u0435\u0442\u0438\u043d\u0443 \u043a\u043e\u0440\u0434\u043e\u043d\u0443",e.crossing_city="City where came from/ \u041c\u0456\u0441\u0442\u043e \u043f\u043e\u0445\u043e\u0434\u0436\u0435\u043d\u043d\u044f",e.last_visit="Last Visit",e.visited_in_last_week="Visited in Last Week",e.comments="Comments",e.deny="Deny",e.previous_visits="Previous Visits"}(a||(a={})),function(e){e[e.UID=0]="UID",e[e.family_surname=1]="family_surname",e[e.number_of_kids=3]="number_of_kids",e[e.family_member_two=2]="family_member_two",e[e.family_member_three=4]="family_member_three",e[e.address_street=6]="address_street",e[e.crossing_city=9]="crossing_city",e[e.border_crossing=10]="border_crossing",e[e.last_visit=11]="last_visit",e[e.visited_in_last_week=12]="visited_in_last_week",e[e.comments=13]="comments",e[e.deny=14]="deny",e[e.previous_visits=15]="previous_visits"}(i||(i={}));a.UID,a.family_surname,a.number_of_kids,a.address_street,a.crossing_city,a.border_crossing,a.last_visit,a.visited_in_last_week,a.comments,a.deny,a.previous_visits,a.family_member_two,a.family_member_three}},[[52,1,2]]]);
//# sourceMappingURL=main.b8ac0f6a.chunk.js.map